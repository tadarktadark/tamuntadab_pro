package com.tdtd.tmtd.model.service;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.google.gson.Gson;
import com.tdtd.tmtd.model.mapper.IYeyakDao;
import com.tdtd.tmtd.vo.ClassVo;
import com.tdtd.tmtd.vo.GangeuisilVo;
import com.tdtd.tmtd.vo.GyeoljeVo;
import com.tdtd.tmtd.vo.YeyakVo;

@Service
public class YeyakServiceImpl implements IYeyakService {

	@Autowired
	private IYeyakDao dao;
	
	@Override
	public int getGangeuisilCount(Map<String, Object> map) {
		return dao.getGangeuisilCount(map);
	}
	
	@Override
	public List<String> getGangeuisilSidoList() {
		return dao.getGangeuisilSidoList();
	}

	@Override
	public List<String> getGangeuisilSigunguList(String gacoSido) {
		return dao.getGangeuisilSigunguList(gacoSido);
	}

	@Override
	public List<GangeuisilVo> getGangeuisilList(Map<String, Object> map) {
		return dao.getGangeuisilList(map);
	}

	@Override
	public List<GangeuisilVo> getGangeuisilDetailList(String gagaGacoId) {
		return dao.getGangeuisilDetailList(gagaGacoId);
	}

//	@Override
//	public List<GangeuisilVo> getYeyakDateList(String gagaId) {
//		return dao.getYeyakDateList(gagaId);
//	}
//
//	@Override
//	public List<GangeuisilVo> getYeyakTimeList(String gagaId) {
//		return dao.getYeyakTimeList(gagaId);
//	}
	
	@Override
	public GangeuisilVo getYeoyuTime(String gagaId) {
		return dao.getYeoyuTime(gagaId);
	}

	@Override
	public int insertYeakInfo(YeyakVo yVo, GyeoljeVo gVo) {
		StringBuffer user = new StringBuffer();
		List<String> list = new ArrayList<String>();
		if(yVo.getGayeClasId()>0) {
			list = dao.getYeyakGyeoljeAcountIdList(yVo.getGayeClasId());
			user.append("{");
			for (int i = 0; i < list.size()-1; i++) {
				user.append("\""+list.get(i)+"\":\"N\",");
			}
			user.append("\""+list.get(list.size()-1)+"\":\"N\"}");
		} else {
			list.add(yVo.getGayeAccountId());
			user.append("{\""+yVo.getGayeAccountId()+"\":\"N\"");
		}
		yVo.setGayeGyeoljeUser(user.toString());			
		int n = dao.insertYeakInfo(yVo);
		int m = 0;
		gVo.setGyeoGeumaek(gVo.getGyeoGeumaek()/list.size());
		gVo.setGyeoDaesangId(yVo.getGayeId());
		for (String id : list) {
			gVo.setGyeoAccountId(id);
			m += dao.insertYeakGyeoljeInfo(gVo);
		}
		return (n>0||m>list.size()-1)?gVo.getGyeoGeumaek()*list.size():-1;
	}

	@Override
	public List<YeyakVo> getMyYeyakList(String gayeAccountId) {
		return dao.getMyYeyakList(gayeAccountId);
	}

	@Override
	public int updateYeyakDelflag(String gayeId) {
		return dao.updateYeyakDelflag(gayeId);
	}
	
	@Override
	public int updateYeoyuTimeAdd(String gagaId) {
		GangeuisilVo gVo = dao.getYeoyuTime(gagaId);
	    int open = Integer.parseInt(gVo.getGacoOpen());
	    int close = Integer.parseInt(gVo.getGacoClose());
	    List<String> times = new ArrayList<String>();
	    String t = "";
	    for(int i=open; i<close; i+=100) {
    		t = String.valueOf(i);
	    	t = (t.length()==3)?"0"+t:t;
	    	times.add(t);
	    }
	    Gson gson = new Gson();
	    Map<String, List<String>> dateMap = gson.fromJson(gVo.getGagaYeoyuTime(), Map.class);
	    Calendar c = Calendar.getInstance(); 
	    SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
	    String date = "";
	    c.add(Calendar.DATE, -1);
	    date = format.format(c.getTime());
	    dateMap.remove(date);
	    c.add(Calendar.DATE, 29);
	    date = format.format(c.getTime());
	    dateMap.put(date, times);
		
	    String yeoyuTime = gson.toJson(dateMap);
	    Map<String,Object> update = new HashMap<String, Object>(); 
	    update.put("gagaId", gagaId);
		update.put("gagaYeoyuTime", yeoyuTime);
		return dao.updateYeoyuTime(update);
	}
	
	@Override
	public int dummy(String gagaId) {
		GangeuisilVo gVo = dao.getYeoyuTime(gagaId);
		int open = Integer.parseInt(gVo.getGacoOpen());
		int close = Integer.parseInt(gVo.getGacoClose());
		List<String> times = new ArrayList<String>();
		String t = "";
		for(int i=open; i<close; i+=100) {
			t = String.valueOf(i);
			t = (t.length()==3)?"0"+t:t;
			times.add(t);
		}
		Map<String, List<String>> dateMap = new HashMap<String, List<String>>();
		Calendar c = Calendar.getInstance(); 
		SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
		String date = "";
		for(int i=0; i<29; i++) {
			date = format.format(c.getTime());
			dateMap.put(date, times);
			c.add(Calendar.DATE, 1);	    	
		}
		Gson gson = new Gson();
		String yeoyuTime = gson.toJson(dateMap);
		Map<String, Object> update = new HashMap<String, Object>();
		update.put("gagaId", gagaId);
		update.put("gagaYeoyuTime", yeoyuTime);
		return dao.updateYeoyuTime(update);
	}
	
	@Override
	public int dummy2() {
		int n = 0;
		Map<String, Object> update = new HashMap<String, Object>();
		update.put("gagaId", "GAGA00265");
		update.put("gagaYeoyuTime", "{\"20231001\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230927\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230926\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230929\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230928\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230923\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230922\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230925\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230924\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230921\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230920\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230919\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230916\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230915\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230918\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230917\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230912\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230911\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230914\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230913\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230930\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231007\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231006\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230910\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231008\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231003\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231002\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231005\":[\"1000\",\"1100\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231004\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"]}");
		n += dao.updateYeoyuTime(update);
		update.put("gagaId", "GAGA00268");
		update.put("gagaYeoyuTime", "{\"20231001\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230927\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230926\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230929\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230928\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230923\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230922\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230925\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230924\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230921\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230920\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230919\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230916\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230915\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230918\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230917\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230912\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230911\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230914\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230913\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230930\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231007\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231006\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230910\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231008\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231003\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231002\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231005\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231004\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"]}");
		n += dao.updateYeoyuTime(update);
		update.put("gagaId", "GAGA00271");
		update.put("gagaYeoyuTime", "{\"20231001\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230927\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230926\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230929\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230928\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230923\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230922\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230925\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230924\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230921\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230920\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230919\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230916\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230915\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230918\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230917\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230912\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230911\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230914\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230913\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230930\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231007\":[\"1000\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231006\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230910\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231008\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231003\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231002\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231005\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231004\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"]}");
		n += dao.updateYeoyuTime(update);
		update.put("gagaId", "GAGA00277");
		update.put("gagaYeoyuTime", "{\"20231001\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230927\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230926\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230929\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230928\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230923\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230922\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230925\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230924\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230921\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230920\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230919\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230916\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230915\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230918\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230917\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230912\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230911\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230914\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230913\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230930\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231007\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231006\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20230910\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231008\":[],\"20231003\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231002\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231005\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"],\"20231004\":[\"1000\",\"1100\",\"1200\",\"1300\",\"1400\",\"1500\",\"1600\",\"1700\",\"1800\",\"1900\",\"2000\",\"2100\"]}");
		n += dao.updateYeoyuTime(update);
		
		return n;
	}

	@Override
	public int updateYeoyuTimeRm(String gagaId) {
		GangeuisilVo gVo = dao.getYeoyuTime(gagaId);
	    int open = Integer.parseInt(gVo.getGacoOpen());
	    int close = Integer.parseInt(gVo.getGacoClose());
	    List<String> times = new ArrayList<String>();
	    String t = "";
	    for(int i=open; i<close; i+=100) {
    		t = String.valueOf(i);
	    	t = (t.length()==3)?"0"+t:t;
	    	times.add(t);
	    }
	    Map<String, List<String>> dateMap = new HashMap<String, List<String>>();
	    Calendar c = Calendar.getInstance(); 
	    SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd");
	    String date = "";
	    c.add(Calendar.DATE, -1);
	    date = format.format(c.getTime());
	    System.out.println(date);
	    c.add(Calendar.DATE, 29);
	    date = format.format(c.getTime());
	    System.out.println(date);
		/* dateMap.put(date, times); */
	    Gson gson = new Gson();
	    String yeoyuTime = gson.toJson(dateMap);
	    Map<String, Object> update = new HashMap<String, Object>();
	    update.put("gagaId", gagaId);
	    update.put("gagaYeoyuTime", yeoyuTime);
		return dao.updateYeoyuTime(update);
	}
	
	@Override
	public List<ClassVo> getchamyeoClassList(String accountId) {
		return dao.getchamyeoClassList(accountId);
	}
}
