<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tdtd.tmtd.model.mapper.SocialUserDaoImpl">

	<!-- 	NOTE [소셜 회원관리 : 네이버 가입 유저 회원 등록 쿼리] -->
	<insert id="naverRegist" parameterType="java.util.Map">
	INSERT INTO NAVER_USER_PROFILE nup2
		 (USER_ACCOUNT_ID,
		 USER_EMAIL, USER_REFRESH_TOKEN, USER_NAME, 
		 USER_NICKNAME, 
		 USER_JOIN_DATE, USER_LAST_ACCESS_DATE, USER_GENDER, 
		 USER_BIRTH, USER_PHONE_NUMBER, USER_SITE, 
		 USER_DELFLAG, USER_PROFILE_FILE, USER_AUTH)
 	VALUES((SELECT 'TMTD'|| ID AS USER_ACCOUNT_ID 
					 FROM(SELECT MAX(CAST(REPLACE(ID,'TMTD') AS NUMBER))+1 AS ID 
					 FROM(SELECT USER_ACCOUNT_ID AS ID 
					 FROM(SELECT USER_ACCOUNT_ID FROM USER_PROFILE up 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM NAVER_USER_PROFILE nup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM KAKAO_USER_PROFILE kup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM GOOGLE_USER_PROFILE gup)))),
			 #{userEmail}, #{userRefreshToken}, #{userName}, 
					 (SELECT '네이버'|| ID AS USER_ACCOUNT_ID 
					 FROM(SELECT MAX(CAST(REPLACE(ID,'TMTD') AS NUMBER))+1 AS ID 
					 FROM(SELECT USER_ACCOUNT_ID AS ID FROM
					 (SELECT USER_ACCOUNT_ID FROM USER_PROFILE up 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM NAVER_USER_PROFILE nup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM KAKAO_USER_PROFILE kup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM GOOGLE_USER_PROFILE gup)))),
		 CURRENT_DATE, CURRENT_DATE , #{userGender}, 
		 #{userBirth}, #{userPhoneNumber}, 'N' , 
		 'N' , #{userProfileFile}, 'S')
	</insert>
	<!-- 	NOTE [소셜 회원관리 : 카카오 가입 유저 회원 등록 쿼리] -->
	<insert id="kakaoRegist" parameterType="java.util.Map">
	INSERT INTO KAKAO_USER_PROFILE kup2 
			 (USER_ACCOUNT_ID,
			 USER_EMAIL, USER_REFRESH_TOKEN, USER_NAME, 
			 USER_NICKNAME, 
			 USER_JOIN_DATE, USER_LAST_ACCESS_DATE, USER_GENDER, 
			 USER_BIRTH, USER_PHONE_NUMBER, USER_SITE, 
			 USER_DELFLAG, USER_PROFILE_FILE, USER_AUTH)
 			VALUES((SELECT 'TMTD'|| ID AS USER_ACCOUNT_ID 
					 FROM(SELECT MAX(CAST(REPLACE(ID,'TMTD') AS NUMBER))+1 AS ID 
					 FROM(SELECT USER_ACCOUNT_ID AS ID 
					 FROM(SELECT USER_ACCOUNT_ID FROM USER_PROFILE up 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM NAVER_USER_PROFILE nup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM KAKAO_USER_PROFILE kup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM GOOGLE_USER_PROFILE gup)))),
			 #{userEmail}, #{userRefreshToken}, #{userName}, 
					 (SELECT '카카오'|| ID AS USER_ACCOUNT_ID 
					 FROM(SELECT MAX(CAST(REPLACE(ID,'TMTD') AS NUMBER))+1 AS ID 
					 FROM(SELECT USER_ACCOUNT_ID AS ID FROM
					 (SELECT USER_ACCOUNT_ID FROM USER_PROFILE up 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM NAVER_USER_PROFILE nup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM KAKAO_USER_PROFILE kup 
					 UNION 
					 SELECT USER_ACCOUNT_ID FROM GOOGLE_USER_PROFILE gup)))),
		 CURRENT_DATE , CURRENT_DATE , #{userGender}, 
		 #{userBirth}, #{userPhoneNumber}, 'N' , 
		 'N' , #{userProfileFile}, 'K')
	</insert>
	<!-- 	NOTE [소셜 회원관리 : 구글 가입 유저 회원 등록 쿼리] -->
	<insert id="googleRegist" parameterType="java.util.Map">
	INSERT INTO GOOGLE_USER_PROFILE gup2 
				 (USER_ACCOUNT_ID,
				 USER_EMAIL, USER_REFRESH_TOKEN, USER_NAME, 
				 USER_NICKNAME, 
				 USER_JOIN_DATE, USER_LAST_ACCESS_DATE, USER_GENDER, 
				 USER_BIRTH, USER_PHONE_NUMBER, USER_SITE, 
				 USER_DELFLAG, USER_PROFILE_FILE, USER_AUTH)
			VALUES((SELECT 'TMTD'|| ID AS USER_ACCOUNT_ID 
						 FROM(SELECT MAX(CAST(REPLACE(ID,'TMTD') AS NUMBER))+1 AS ID 
						 FROM(SELECT USER_ACCOUNT_ID AS ID 
						 FROM(SELECT USER_ACCOUNT_ID FROM USER_PROFILE up 
						 UNION 
						 SELECT USER_ACCOUNT_ID FROM NAVER_USER_PROFILE nup 
						 UNION 
						 SELECT USER_ACCOUNT_ID FROM KAKAO_USER_PROFILE kup 
						 UNION 
						 SELECT USER_ACCOUNT_ID FROM GOOGLE_USER_PROFILE gup)))),
			 #{userEmail}, #{userRefreshToken}, #{userName}, 
						 (SELECT '구글'|| ID AS USER_ACCOUNT_ID 
						 FROM(SELECT MAX(CAST(REPLACE(ID,'TMTD') AS NUMBER))+1 AS ID 
						 FROM(SELECT USER_ACCOUNT_ID AS ID FROM
						 (SELECT USER_ACCOUNT_ID FROM USER_PROFILE up 
						 UNION 
						 SELECT USER_ACCOUNT_ID FROM NAVER_USER_PROFILE nup 
						 UNION 
						 SELECT USER_ACCOUNT_ID FROM KAKAO_USER_PROFILE kup 
						 UNION 
						 SELECT USER_ACCOUNT_ID FROM GOOGLE_USER_PROFILE gup)))),
		 CURRENT_DATE , CURRENT_DATE , #{userGender}, 
		 #{userBirth}, #{userPhoneNumber}, 'N' , 
		 'N' , #{userProfileFile}, 'G')
	</insert>
	
<!-- 	NOTE [소셜 회원관리 : ] -->
	<update id="">
	
	</update>
</mapper>
